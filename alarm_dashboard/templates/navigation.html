<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Einsatznavigation</title>
    <link rel="stylesheet" href="/static/css/dashboard.css">
    <link
        rel="stylesheet"
        href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
        crossorigin=""
    >
</head>
<body class="navigation-page">
    <div class="app-shell">
        <div class="app-topline" aria-hidden="true"></div>
        <header class="app-header">
            <div class="header-brand">
                <h1>
                    Feuerwehr <span>{{ department_name }}</span>
                </h1>
            </div>
            <div class="header-meta">
                <img src="{{ crest_url }}" alt="Gemeindewappen" class="crest">
            </div>
        </header>
        <main class="app-main">
            <section class="panel navigation-view" aria-labelledby="navigation-title">
                <div class="navigation-header">
                    <h2 id="navigation-title">Navigation</h2>
                    <p class="navigation-target" id="navigation-target">Einsatzdaten werden geladen …</p>
                </div>
                <ul class="navigation-details" aria-live="polite" aria-label="Routeninformationen">
                    <li>
                        <strong>Start</strong>
                        <span id="navigation-start">–</span>
                    </li>
                    <li>
                        <strong>Ziel</strong>
                        <span id="navigation-destination">–</span>
                    </li>
                    <li>
                        <strong>Entfernung</strong>
                        <span id="navigation-distance">–</span>
                    </li>
                    <li>
                        <strong>Dauer</strong>
                        <span id="navigation-duration">–</span>
                    </li>
                </ul>
                <div class="navigation-map-frame">
                    <div
                        id="navigation-map"
                        class="navigation-map navigation-map--message"
                        role="region"
                        aria-live="polite"
                    >
                        Karte wird geladen …
                    </div>
                </div>
                <p class="navigation-status" id="navigation-status">Route wird vorbereitet …</p>
            </section>
        </main>
        <nav class="bottom-nav" aria-label="Hauptnavigation">
            <a href="/" class="bottom-nav__item" aria-label="Zurück zum Dashboard">
                <span class="bottom-nav__icon" aria-hidden="true">
                    <svg viewBox="0 0 24 24" role="presentation">
                        <path d="M13 5 6 12l7 7 1.5-1.5L9 12l5.5-5.5z" />
                    </svg>
                </span>
                <span class="bottom-nav__label">Zurück</span>
            </a>
            <a href="/navigation" class="bottom-nav__item bottom-nav__item--active" aria-current="page">
                <span class="bottom-nav__icon" aria-hidden="true">
                    <svg viewBox="0 0 24 24" role="presentation">
                        <path
                            d="M12 2a5 5 0 0 0-5 5c0 3.53 5 11 5 11s5-7.47 5-11a5 5 0 0 0-5-5zm0 7a2 2 0 1 1 0-4 2 2 0 0 1 0 4zM4 20h16v2H4z"
                        />
                    </svg>
                </span>
                <span class="bottom-nav__label">Navigation</span>
            </a>
            <a href="/settings" class="bottom-nav__item" aria-label="Einstellungen">
                <span class="bottom-nav__icon" aria-hidden="true">
                    <svg viewBox="0 0 24 24" role="presentation">
                        <path d="M19.14 12.94c.04-.3.06-.61.06-.94 0-.32-.02-.64-.07-.94l2.03-1.58a.49.49 0 0 0 .12-.61l-1.92-3.32a.488.488 0 0 0-.59-.22l-2.39.96c-.5-.38-1.03-.7-1.62-.94l-.36-2.54a.484.484 0 0 0-.48-.41h-3.84c-.24 0-.43.17-.47.41l-.36 2.54c-.59.24-1.13.57-1.62.94l-2.39-.96c-.22-.08-.47 0-.59.22L2.74 8.87c-.12.21-.08.47.12.61l2.03 1.58c-.05.3-.09.63-.09.94s.02.64.07.94l-2.03 1.58a.49.49 0 0 0-.12.61l1.92 3.32c.12.22.37.29.59.22l2.39-.96c.5.38 1.03.7 1.62.94l.36 2.54c.05.24.24.41.48.41h3.84c.24 0 .44-.17.47-.41l.36-2.54c.59-.24 1.13-.56 1.62-.94l2.39.96c.22.08.47 0 .59-.22l1.92-3.32c.12-.22.07-.47-.12-.61l-2.01-1.58zM12 15.6c-1.98 0-3.6-1.62-3.6-3.6s1.62-3.6 3.6-3.6 3.6 1.62 3.6 3.6-1.62 3.6-3.6 3.6z" />
                    </svg>
                </span>
                <span class="bottom-nav__label">Einstellungen</span>
            </a>
            <div class="bottom-nav__meta" role="contentinfo">
                <span class="bottom-nav__credit">
                    © <a
                        href="mailto:t.braun@feuerwehr-willingshausen.de"
                        class="bottom-nav__credit-link"
                    >Timo Braun</a>
                </span>
                {% if app_version %}
                    {% if app_version_url %}
                        <a
                            href="{{ app_version_url }}"
                            class="bottom-nav__version"
                            target="_blank"
                            rel="noopener noreferrer"
                        >Version {{ app_version }}</a>
                    {% else %}
                        <span class="bottom-nav__version">Version {{ app_version }}</span>
                    {% endif %}
                {% endif %}
            </div>
        </nav>
    </div>
    <script
        src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"
        crossorigin=""
        defer
    ></script>
    <script>
        window.navigationConfig = {
            defaultStart: {
                lat: {{ default_latitude | tojson }},
                lon: {{ default_longitude | tojson }},
                label: {{ default_location_name | tojson }}
            },
            orsApiKey: {{ ors_api_key | tojson }},
            instructionDistanceTrigger: 60
        };
    </script>
    <script src="/static/js/navigation.js" defer></script>
</body>
</html>
